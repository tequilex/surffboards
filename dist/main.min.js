"use strict";for(var myMap,intervalId,soundLvl,mesureWidth=function(e){var t=0,n=$(window).width(),o=e.closest(".offers-menu").find(".offers-menu__title"),o=o.width()*o.length,e=e.find(".offers-menu__container"),i=parseInt(e.css("padding-left")),e=parseInt(e.css("padding-right"));return{container:t=window.matchMedia("(max-width: 768px)").matches?n-o:524,textContainer:t-e-i}},closeEveryItemInContainer=function(e){var t=e.find(".offers-menu__item"),e=e.find(".offers-menu__content");t.removeClass("active"),e.width(0)},openItemMenu=function(e){var t=e.find(".offers-menu__content"),n=mesureWidth(e),o=e.find(".offers-menu__container");e.addClass("active"),t.width(n.container),o.width(n.textContainer)},openItem=($(".offers-menu__title").on("click",function(e){console.log("ffff");var e=$(e.currentTarget),t=e.closest(".offers-menu__item"),n=t.hasClass("active"),e=e.closest(".offers-menu");n?closeEveryItemInContainer(e):(closeEveryItemInContainer(e),openItemMenu(t))}),function(e){var e=e.closest(".team__item"),t=e.find(".team__content"),n=t.find(".team__content-block").height();e.addClass("active"),t.height(n)}),closeEveryItem=function(e){var t=e.find(".team__content");e.find(".team__item").removeClass("active"),t.height(0)},validateFields=($(".team__title").click(function(e){var e=$(e.currentTarget),t=e.closest(".team__list");e.closest(".team__item").hasClass("active")?closeEveryItem(t):(closeEveryItem(t),openItem(e))}),function(e,t){return t.forEach(function(e){e.removeClass("input-error"),""==e.val().trim()&&e.addClass("input-error")}),0==e.find(".input-error").length}),init=($(".form").submit(function(e){e.preventDefault();var e=$(e.currentTarget),t=e.find("[name='name']"),n=e.find("[name='phone']"),o=e.find("[name='comment']"),i=e.find("[name='to']"),a=$("#modal"),r=a.find(".modal__content");a.removeClass("error-modal"),validateFields(e,[t,n,o,i])&&((e=$.ajax({url:"https://webdev-api.loftschool.com/sendmail",method:"POST",data:{name:t.val(),phone:n.val(),comment:o.val(),to:i.val()},error:function(e){}})).done(function(e){r.text(e.message)}),e.fail(function(e){e=e.responseJSON.message;r.text(e),a.addClass("error-modal")}),e.always(function(){$.fancybox.open({src:"#modal",type:"inline"})}))}),$(".app-close-modal").click(function(e){e.preventDefault(),$.fancybox.close()}),function(){myMap=new ymaps.Map("map",{center:[55.751855,37.576905],zoom:16,controls:["zoomControl"]});var t=new ymaps.GeoObjectCollection({},{draggable:!1,iconLayout:"default#image",iconImageSize:[58,73],iconImageOffset:[-3,-42],iconImageHref:"images/img/marker.svg"});[[55.751855,37.576905]].forEach(function(e){t.add(new ymaps.Placemark(e))}),myMap.geoObjects.add(t),myMap.behaviors.disable("scrollZoom")}),openButton=(ymaps.ready(init),document.querySelector(".hamburger")),closeButton=document.querySelector(".fullscreen-menu__close"),fullMenu=document.querySelector(".fullscreen-menu"),sections=($(".menu__item").click(function(e){fullMenu.style.left="150vw"}),openButton.addEventListener("click",function(e){e.preventDefault,fullMenu.style.left="0vw"}),closeButton.addEventListener("click",function(e){e.preventDefault,fullMenu.style.left="150vw"}),$("section")),display=$(".main-content"),sideMenu=$(".fixed-menu"),menuItems=sideMenu.find(".fixed-menu__item"),mobileDetect=new MobileDetect(window.navigator.userAgent),isMobile=mobileDetect.mobile(),inscroll=!1,countSectionPosition=(sections.first().addClass("active"),function(e){e*=-100;return isNaN(e)?(console.error("передано не верное значение в countSectionPosition"),0):e}),changeMenuThemeForSection=function(e){var t="fixed-menu--shadowed";"black"==sections.eq(e).attr("data-sidemenu-theme")?sideMenu.addClass(t):sideMenu.removeClass(t)},resetActiveClassForItem=function(e,t,n){e.eq(t).addClass(n).siblings().removeClass(n)},performTransition=function(e){var t;inscroll||(inscroll=!0,t=countSectionPosition(e),changeMenuThemeForSection(e),display.css({transform:"translateY(".concat(t,"%)")}),resetActiveClassForItem(sections,e,"active"),setTimeout(function(){inscroll=!1,resetActiveClassForItem(menuItems,e,"fixed-menu__item--active")},1300))},viewportScroller=function(){var e=sections.filter(".active"),t=e.next(),n=e.prev();return{next:function(){t.length&&performTransition(t.index())},prev:function(){n.length&&performTransition(n.index())}}},video=($(window).on("wheel",function(e){var e=e.originalEvent.deltaY,t=viewportScroller();0<e&&t.next(),e<0&&t.prev()}),$(window).on("keydown",function(e){var t=e.target.tagName.toLowerCase(),t="input"==t||"textarea"==t,n=viewportScroller();if(!t)switch(e.keyCode){case 38:n.prev();break;case 40:n.next()}}),$(".wrapper").on("touchmove",function(e){return e.preventDefault()}),$("[data-scroll-to]").click(function(e){e.preventDefault();e=$(e.currentTarget).attr("data-scroll-to"),e=$("[data-section-id=".concat(e,"]"));performTransition(e.index())}),isMobile&&$("body").swipe({swipe:function(e,t){viewportScroller()["down"==t?"prev":"up"==t?"next":""]()}}),document.querySelector("#player")),playBtn=document.querySelector(".video__player-img"),playerPlayBtn=document.querySelector(".duration-img"),durationControl=document.querySelector("#durationLevel"),soundControl=document.querySelector("#micLevel"),soundBtn=document.querySelector("#sound__btn"),dynamicBtn=document.querySelector("#dynamic"),playButtons=(video.addEventListener("click",playStop),document.querySelectorAll(".play")),i=0;i<playButtons.length;i++)playButtons[i].addEventListener("click",playStop);function playStop(){playBtn.classList.toggle("video__player-img--active"),playerPlayBtn.classList.toggle("active"),video.paused?(video.play(),intervalId=setInterval(updateDuration,1e3/60)):(clearInterval(intervalId),video.pause())}function setVideoDuration(){video.currentTime=durationControl.value,updateDuration()}function updateDuration(){durationControl.value=video.currentTime;var e=video.duration/100,e=video.currentTime/e;durationControl.style.background="linear-gradient(90deg, #fedb3f 0%, #fedb3f ".concat(e,"%, #626262 ").concat(e,"%)")}function changeSoundVolume(){video.volume=soundControl.value/10,0===video.volume?soundBtn.classList.add("active"):soundBtn.classList.remove("active")}function soundOffOn(){0===video.volume?(soundBtn.classList.remove("active"),video.volume=soundLvl,soundControl.value=10*soundLvl):(soundBtn.classList.add("active"),soundLvl=video.volume,video.volume=0,soundControl.value=0)}durationControl.min=0,durationControl.value=0,durationControl.max=video.duration,durationControl.addEventListener("input",setVideoDuration),soundControl.min=0,soundControl.max=10,soundControl.value=soundControl.max/2,soundControl.addEventListener("input",changeSoundVolume),dynamicBtn.addEventListener("click",soundOffOn),video.addEventListener("ended",function(){playBtn.classList.toggle("video__player-img--active"),playerPlayBtn.classList.remove("active"),video.currentTime=0});var findBlockByAlias=function(n){return $(".rewiews__item").filter(function(e,t){return $(t).attr("data-linked-with")==n})},slider=($(".interactive-avatar__link").click(function(e){e.preventDefault();var e=$(e.currentTarget),t=e.attr("data-open"),t=findBlockByAlias(t),e=e.closest(".rewiews__switcher-item");t.addClass("active").siblings().removeClass("active"),e.addClass("active").siblings().removeClass("active")}),$(".offers").bxSlider({pager:!1,controls:!1}));$(".offers-slider__arrow--direction--prev").click(function(e){slider.goToPrevSlide()}),$(".offers-slider__arrow--direction--next").click(function(e){slider.goToNextSlide()});